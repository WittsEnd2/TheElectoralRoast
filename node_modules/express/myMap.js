var fBase = new Firebase("https://glowing-inferno-6337.firebaseio.com/");
var trumpNode = fBase.child("Tweets/Trump");
var clintonNode = fBase.child("Tweets/Clinton");
var sandersNode = fBase.child("Tweets/Bernie");
var cruzNode = fBase.child("Tweets/Cruz");
var flag = false;
var information = {};
var map;
	  map = new jvm.Map({

            map: 'world_mill',
            markerStyle: {
               initial: {
                 fill: 'red'
                 }
           },
	   onMarkerTipShow: function(e, label, code) {
			label.html('<div style="padding: 25px 15px 15px; position: relative; background-color: black;"><p class="lead">'+label.html()+'</p></div>');
		},
           container: $('#map')});
/*function initMap() {
	var map = new google.maps.Map(document.getElementById('map'), {
	zoom: 4,
	center: {lat: 37.090, lng: -95.712},
		mapTypeId: google.maps.MapTypeId.TERRAIN
	}); */
	//var name = node.key();
	var snapshot;
	var keyVal;
        var markerIndex = 0;
   cruzNode.on("child_added",function(snapshot,prevChildKey){
      var newInfo = snapshot.val();
      var keyVal = snapshot.key();
      var latitude = newInfo.long;
      var long = newInfo.lat;
      var feeling = newInfo.attitude;
      var who = newInfo.who;
      var color = '#ff0000';
      if(feeling==="Negative"){
      color='#ff0000';
      }
      else if(feeling ==="Positive"){
      color = "#1aff1a";
      }
      else{
      color = "#ffb366";
      }

      map.addMarker(markerIndex, {latLng: [latitude, long], style: {fill: color, 'font-size': 26 }, name: newInfo.tweet});
	  markerIndex += 1;

  });
   sandersNode.on("child_added",function(snapshot,prevChildKey){
      var newInfo = snapshot.val();
      var keyVal = snapshot.key();
      var latitude = newInfo.long;
      var long = newInfo.lat;
      var feeling = newInfo.attitude;
      var who = newInfo.who;
      var color = '#ff0000';
      if(feeling==="Negative"){
      color='#ff0000';
      }
      else if(feeling ==="Positive"){
      color = "#1aff1a";
      }
      else{
      color = "#ffb366";
      }

      map.addMarker(markerIndex, {latLng: [latitude, long], style: {fill: color, 'font-size': 26 }, name: newInfo.tweet});
	  markerIndex += 1;

  });
   clintonNode.on("child_added",function(snapshot,prevChildKey){
      var newInfo = snapshot.val();
      var keyVal = snapshot.key();
      var latitude = newInfo.long;
      var long = newInfo.lat;
      var feeling = newInfo.attitude;
      var who = newInfo.who;
      var color = '#ff0000';
      if(feeling==="Negative"){
      color='#ff0000';
      }
      else if(feeling ==="Positive"){
      color = "#1aff1a";
      }
      else{
      color = "#ffb366";
      }

      map.addMarker(markerIndex, {latLng: [latitude, long], style: {fill: color, 'font-size': 26 }, name: newInfo.tweet});
	  markerIndex += 1;

  });
  trumpNode.on("child_added",function(snapshot,prevChildKey){
      var newInfo = snapshot.val();
       keyVal = snapshot.key();
      var latitude = newInfo.long;
      var long = newInfo.lat;
      var feeling = newInfo.attitude;
      var who = newInfo.who;
      var color = '#ff0000';
      if(feeling==="Negative"){
      	color='#ff0000';
      }
      else if(feeling ==="Positive"){
      	color = "#1aff1a";
      }
      else{
      	color = "#ffb366";
      }

      map.addMarker(markerIndex, {latLng: [latitude, long], style: {fill: color, 'font-size': 26 }, name: newInfo.tweet});
	  markerIndex += 1;
  });
 
  //lastOne.update({updated:"true"});

