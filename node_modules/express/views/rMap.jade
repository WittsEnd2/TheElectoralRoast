doctype html
html
  head
    title UMBC HACKS
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css', integrity='sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7', crossorigin='anonymous')
    script(src='https://cdn.firebase.com/js/client/2.4.1/firebase.js')
    style
      include ../stylesheets/republicanStyle.css
  body
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js')
    script(src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js')
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js', integrity='sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS', crossorigin='anonymous')
    nav.navbar.navbar-default.navbar-static-top

      .container.navbarBackground
        .navbar-header
          button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#navbar', aria-expanded='false', aria-controls='navbar')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='#') Political Tracker
        #navbar.navbar-collapse.collapse
          ul.nav.navbar-nav.navbar-right
            li.active
              a(href='/') Home
            li
              a(href='#about') About
            li
              a(href='map') Campaign Map
            li.dropdown
              a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
                | Candidate Map
                span.caret
                ul.dropdown-menu
                  li.dropdown-header Republicans
                  li
                    a(href='#') Donald Trump
                  li
                    a(href='#') Ted Cruz
                  li
                    a(href='#') Marco Rubio
                  li.divider(role='separator')
                  li.dropdown-header Democrats
                  li
                    a(href='#') Hilary Clinton
                  li
                    a(href='#') Bernie Sanders
        // /.nav-collapse
    .container
      .row
        .col-md-12
          .header
            h1.headline.text-center Campaign Map
      .row
        .col-md-12
          p.bodyText.text-center Twitter posts from potential voters about candidates
          ul.bodyText
            li Red = Negative
            li Brown = Neutral
            li Green = Positive
      br
      br

    #map
    script.
      var fBase = new Firebase("https://glowing-inferno-6337.firebaseio.com/");
      var node = fBase.child("Tweets");
      var flag = false;
      var information = {};
      var map;
      function initMap() {
      var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 4,
      center: {lat: 37.090, lng: -95.712},
      mapTypeId: google.maps.MapTypeId.TERRAIN
      });
      node.on("child_added",function(snapshot,prevChildKey){
      var newInfo = snapshot.val();
      var latitude = newInfo.long;
      var lon= newInfo.lat;
      console.log(latitude);
      console.log(lon);
      var feeling = newInfo.attitude;
      console.log(feeling);
      var who = newInfo.who;
      console.log(who);
      var color = '#ff0000';
      if(feeling==="Negative"){
      color='#ff0000';
      }
      else if(feeling ==="Positive"){
      color = "#1aff1a";
      }
      else{
      color = "#ffb366";
      }
      console.log(color);
      var newCircle = new google.maps.Circle({
      fillColor: color,
      strokeColor:color,
      strokeOpacity: .9,
      strokeWeight: 1,
      fillOpacity: 0.4,
      map: map,
      center: {lat:latitude,lng:lon},
      radius:30000
      });

      });
      }
      // Construct the circle for each value in citymap.
      // Note: We scale the area of the circle based on the population.
    script(async='', defer='', src='https://maps.googleapis.com/maps/api/js?key=AIzaSyBrTZOrrLFwf7HWBxRNbOpBxxLhfHW7RkM&callback=initMap')
